# CMS Starter

Startup your website's CMS easily! Includes basic auth using JWT & cookies, CRUD for users, and a setting to add/remove allowed hosts to link your websites.

### Pre-requisite

1. Docker daemon running in background

### Pull the project

```bash
git clone https://github.com/silverlunah/cms-starter.git
```

## Development (Local)

### Starting the frontend and backend projects

This is using `concurrently` so you can just take down both processes using ctrl+c / cmd+c

```bash
npm run local:up
```

You might encounter and error if MySQL is not running or not matching the .env file generated by this script. Check `backend/.env` to see the initial config. You can run mysql docker daemon if you want, just follow the docker setup below then close backend and frontend containers leaving mysql.

NOTE: This is just important for the first run so you could get the project working. If you want to use custom configurations, feel free to remove/modify these scripts from `package.json` and `/scripts` directory

### Starting the backend project

```bash
npm run local:backend:up
```

### Starting the frontend project

```bash
npm run local:frontend:up
```

## Prisma

1. When you modify a model or add a new one at `schema.prisma`
2. Run:

```bash
npm run prisma:update:table
```

3. For full database reset (You will lose all data):

```bash
npm run prisma:migrate:reset
```

## Development (Docker)

### Starting the project using Docker (Production Simulation)

This is how the project is run in production.

```bash
npm run docker:up
```

### Stopping the Docker containers

```bash
npm run docker:down
```

### Restarting the Docker containers

```bash
npm run docker:restart
```

## Do Not Forget

1. Add your main website's URL to allowed_hosts db

## Initial Login

On first login, you can use:

- Email: admin@admin.com
- Password: test

## Production Tips

1. Remove mysql port in your production docker-compose.yml, this is so that your db is only accessible in your docker network

```bash
ports:
      - "3006:3006"
```

2. You don't need to worry about prisma commands since production uses "deploy" instead of "dev"
